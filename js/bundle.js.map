{"version":3,"sources":["root.module.js","components/components.module.js","common/app.module.js","components/contact/contact.module.js","components/search/search.module.js","root.component.js","root.controller.js","components/search/searchinput/searchinput.component.js","components/search/searchinput/searchinput.controller.js","components/search/searchitem/searchitem.component.js","components/search/searchitem/searchitem.controller.js","components/search/searchpopup/searchpopup.component.js","components/search/searchpopup/searchpopup.controller.js","components/search/searchresults/searchresults.component.js","components/search/searchresults/searchresults.controller.js","components/search/searchresults/songs.js","templates.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["angular\n  .module('root', [\n    'common',\n    'components',\n    'templates',\n    'spotify'\n  ]);\n","angular\n  .module('components', [\n    'components.contact',\n    'components.search'\n  ]);\n","angular\n  .module('common', [\n    'ui.router'\n  ]);\n","angular\n  .module('components.contact', [\n    'ui.router'\n  ]);\n","angular\n    .module('components.search', [\n        'ui.router'\n    ]);","var root = {\n  templateUrl: './root.html',\n  controller: 'RootController as parent'\n};\n\nangular\n  .module('root')\n  .component('root', root);\n","function RootController($scope, $log, $http, Spotify){\n    var ctrl = this;\n    $scope.$log = $log;\n    ctrl.searchLimit = {'limit': 6, 'offset': 0};\n    ctrl.fetchedData = [];\n    ctrl.albumsTotal = 0;\n    ctrl.artistsTotal = 0;\n    ctrl.searchQuery = '';\n    ctrl.showModal = false;\n\n    //this component will take search phrase and will get data from ajax\n    $scope.$on('search', function(event, data){\n        ctrl.searchLimit = {'limit': 6, 'offset': 0};\n        ctrl.searchQuery = data;\n\n        Spotify.search(data, 'artist,album', ctrl.searchLimit)\n         .then(function (response) {\n\n             ctrl.albumsTotal = response.data.albums.total;\n             ctrl.artistsTotal = response.data.artists.total;\n\n\n\n            ctrl.fetchedData = [...response.data.albums.items, ...response.data.artists.items];\n        });\n\n    });\n\n    $scope.$on('showmemore', function(event, data){\n        ctrl.searchLimit.offset += 6;\n\n        Spotify.search(ctrl.searchQuery, 'artist,album', ctrl.searchLimit)\n         .then(function (response) {\n            ctrl.fetchedData = ctrl.fetchedData.concat([...response.data.albums.items, ...response.data.artists.items]);\n        });\n\n    });\n\n    $scope.$on('viewitem', function(event, data){\n        ctrl.showModal = true;\n\n        if(data.type == 'album'){\n            Spotify.getAlbum(data.id)\n                .then(function (response) {\n\n                    //$scope.$apply(function () {\n                        ctrl.modalTitle = response.data.name;\n                        ctrl.modalType = 'album';\n                        ctrl.modalData = response.data.tracks.items;\n                        ctrl.modalPicture = response.data.images[0];\n                        $log.log(ctrl.modalTitle);\n                    //});\n                });\n\n        }else if(data.type == 'artist'){\n            var fetchedArtist = Spotify.getArtist(data.id);\n\n            var artistAlbums = Spotify.getArtistAlbums(data.id);\n\n            Promise.all([fetchedArtist, artistAlbums]).then(values=>{\n                $log.log(values);\n                $scope.$apply(function () {\n                    ctrl.modalTitle = values[0].data.name;\n                    ctrl.modalType = 'artist';\n                    ctrl.modalData = values[1].data.items;\n                    ctrl.modalPicture = values[0].data.images[0];\n                    $log.log(ctrl.modalTitle);\n                });\n            });\n\n        }\n    });\n}\n\nangular\n    .module('root')\n    .controller('RootController', ['$scope', '$log', '$http', 'Spotify', RootController]);\n","var searchinput ={\n    templateUrl: './searchinput.html',\n    controller: 'SearchInputController',\n    bindings: {\n        st: '='\n    }\n};\n\nangular\n    .module('components.search')\n    .component('searchinput', searchinput);\n","function SearchInputController($scope, $log){\n    var ctrl = this;\n    $scope.$log = $log;\n    $scope.$ctrl.onclick = function(e){\n        $scope.$emit('search', ctrl.st);\n    }\n}\n\nangular\n    .module('components.search')\n    .controller('SearchInputController', ['$scope', '$log', SearchInputController]);\n","var searchitem ={\n    templateUrl: './searchitem.html',\n    controller: 'SearchItemController',\n    transclude: {name:'h5'},\n    bindings: {\n        itemtype: '<',\n        itemimgs: '<',\n        itemid: '<'\n    }\n};\n\nangular\n    .module('components.search')\n    .component('searchitem', searchitem);\n","function SearchItemController($scope, $log){\n    var ctrl = this;\n    $scope.$log = $log;\n}\n\nangular\n    .module('root')\n    .controller('SearchItemController', ['$scope', '$log', SearchItemController]);\n","var searchpopup ={\n    templateUrl: './searchpopup.html',\n    controller: 'SearchPopupController',\n    bindings: {\n        showmodal: '=',\n        modaltitle: '<',\n        modaltype: '<',\n        modaldata: '<',\n        modalpicture: '<'\n    }\n};\n\nangular\n    .module('components.search')\n    .component('searchpopup', searchpopup);\n","function SearchPopupController($scope, $log){\n    var ctrl = this;\n    $scope.$log = $log;\n    ctrl.formatDate = function(ms_duration){\n        var date = new Date();\n        date.setTime(ms_duration);\n        return date;//date.getMinutes() + ':' + date.getSeconds();\n    }\n}\n\nangular\n    .module('components.search')\n    .controller('SearchPopupController', ['$scope', '$log', SearchPopupController]);\n","var searchresults ={\n    templateUrl: './searchresults.html',\n    controller: 'SearchResultsController',\n    bindings: {\n        fetchedarr: '=',\n        artiststotal: '=',\n        albumstotal: '='\n    }\n};\n\nangular\n    .module('components.search')\n    .component('searchresults', searchresults);\n","function SearchResultsController($scope, $log){\n    var ctrl = this;\n    $scope.$log = $log;\n    $log.log(this.artistsTotal);\n    $log.log(this.albumsTotal);\n    ctrl.showmemore = function(){\n        $log.log('show me more');\n        $scope.$emit('showmemore');\n    }\n}\n\nangular\n    .module('root')\n    .controller('SearchResultsController', ['$scope', '$log', SearchResultsController]);\n","const data = [\n    {author: 'suzy', type: 'album', songs: [{name: 'а я девочек люблю'}, {name: 'золотые купола'}]},\n    {type: 'artist', albums: [{name: 'водочку пьем, водочку льем'}, {name: 'земля в иллюминаторе'}]}\n];","angular.module('templates', []).run(['$templateCache', function($templateCache) {$templateCache.put('./root.html','<div class=\"root\"><nav><searchinput st=\"parent.searchText\"></searchinput></nav><main><searchresults fetchedarr=\"parent.fetchedData\" albumstotal=\"parent.albumsTotal\" artiststotal=\"parent.artistsTotal\"></searchresults><searchpopup showmodal=\"parent.showModal\" modaltitle=\"parent.modalTitle\" modaltype=\"parent.modalType\" modaldata=\"parent.modalData\" modalpicture=\"parent.modalPicture\"></searchpopup></main></div>');\n$templateCache.put('./searchinput.html','<div id=\"search-container\"><input type=\"text\" placeholder=\"Search for artist or album title\" ng-model=\"$ctrl.st\" ng-keypress=\"$event.which === 13 && $ctrl.onclick()\"><div id=\"search-button\" ng-click=\"$ctrl.onclick();\"><span>SEARCH</span></div></div>');\n$templateCache.put('./searchitem.html','<div class=\"searchitem {{$ctrl.itemtype}}\"><div class=\"itempic cell A1\"><div class=\"alBg\" style=\"background-image:url(\\'{{$ctrl.itemimgs[1][\\'url\\']}}\\')\"></div>f<div class=\"itempicContainer txt\" ng-click=\"$emit(\\'viewitem\\', {type: $ctrl.itemtype, id: $ctrl.itemid});\"><img ng-src=\"{{$ctrl.itemtype==\\'album\\'? \\'/img/album-icon@2x.png\\':\\'/img/artist-icon@2x.png\\'}}\"> {{$ctrl.itemtype==\\'album\\'? \\'View tracks\\':\\'View albums\\'}}</div></div><div class=\"itemnamecontainer\"><div class=\"itemname\" ng-transclude=\"name\"></div></div></div>');\n$templateCache.put('./searchpopup.html','<div id=\"modal-container\" ng-show=\"$ctrl.showmodal\"><div id=\"modal-dimmed-part\"></div><figure id=\"modal-data-container\"><div class=\"firstRow\" style=\"background-image: url(\\'{{$ctrl.modalpicture.url}}\\')\"><img id=\"modalCross\" class=\"modalCross\" src=\"/img/Cross@2x.png\" height=\"20\" width=\"20\" ng-click=\"$ctrl.showmodal = false\"> <img id=\"modalCrossBlack\" class=\"modalCross\" src=\"/img/Cross Dark@2x.png\" height=\"20\" width=\"20\" ng-click=\"$ctrl.showmodal = false\"> <span id=\"albumTitle\"><span class=\"trackson\">{{$ctrl.modaltype == \\'artist\\'? \\'Albums by\\':\\'Tracks on\\'}}</span><br>{{$ctrl.modaltitle}}</span></div><div class=\"secondRow\"><div id=\"captionContainer\"><span>{{$ctrl.modaltype == \\'artist\\'? \\'Albums\\':\\'Tracks\\'}}</span></div><div id=\"albumRowsContainer\"><div class=\"albumRow\" ng-repeat=\"item in $ctrl.modaldata track by $index\"><div ng-show=\"$ctrl.modaltype==\\'artist\\'\" class=\"albumImgContainer\" style=\"background-image:url(\\'{{item.images[2].url}}\\')\"></div><div class=\"albumDataContainer\"><div class=\"albumNameContainer\">{{item.name}}</div><div class=\"albumYearContainer\">{{$ctrl.modaltype == \\'artist\\'? \\'-\\':$ctrl.formatDate(item.duration_ms)|date:\\'mm:ss\\'}}</div></div></div></div></div></figure></div>');\n$templateCache.put('./searchresults.html','<div id=\"willappear\" ng-if=\"!$ctrl.fetchedarr.length\"><div id=\"pusher\"><img src=\"img/Magnify@2x.png\"><br><span>Your results will appear here</span></div></div><searchitem itemtype=\"item.type\" itemimgs=\"item.images\" itemid=\"item.id\" ng-repeat=\"item in $ctrl.fetchedarr track by $index\"><h5>{{item.name}}</h5><img ng-src=\"{{item.images[1][\\'url\\']}}\" width=\"263\" height=\"263\"></searchitem><div id=\"showmemore-button\" ng-click=\"$ctrl.showmemore();\" ng-show=\"!!$ctrl.fetchedarr.length && ($ctrl.fetchedarr.length<($ctrl.artiststotal + $ctrl.artiststotal))\"><span>SHOW ME MORE</span></div>');}]);"]}